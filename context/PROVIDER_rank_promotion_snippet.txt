// context/PROVIDER_rank_promotion_snippet.txt
// IMPORT
import { canPromote, countCompletedAtOrAbove } from '@/utils/rankProgress';

// INSIDE undertakeQuest success branch (after updating completedQuests):
const newCompleted = completed.map(c=> ({ ...c, rank: (q.requiredRank as any) })) as any;
const orderArr:any = ['Sem Guilda','F','E','D','C','B','A','S','SS','SSS'];
const cur = (p.adventurerRank as any);
const doneAtOrAbove = countCompletedAtOrAbove(newCompleted, cur);
const promote = canPromote(cur, doneAtOrAbove);
if(promote.ok && promote.next){
  p.adventurerRank = promote.next as any;
  // opcional: toast fora do setState usando seu ToastProvider
}
